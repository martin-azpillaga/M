grammar m.M with m.Modular hidden(WS)

import "http://www.minim.games/expressions"
import "http://www.minim.games/modular"
import "http://www.eclipse.org/emf/2002/Ecore"
generate m "http://www.minim.games/M"

Module:
	(entities+=Entity|procedures+=Procedure)*
;

Entity:
	 name=STRING ( ':'  base=STRING)?
	 BEGIN (components+=Component (SEPARATOR components+=Component)*)? END;

Component:
	 name=IDENTIFIER ( value=(Vector|Asset))?;
	
Vector:
	values+=FLOAT ( values+=FLOAT)*
;

Asset:
	value=STRING
;

@Override Statement:
	Selection|Iteration|Call|Assignment|Loop
;

Loop:
	'∀' identifier=IdentifierLiteral ('∈' tags+=IdentifierLiteral*)?
	BEGIN statements+=Statement* END
;

Access: IDENTIFIER ('.' IDENTIFIER)*;

@Override
IdentifierLiteral:
	value=Access;
	
@Override
Assignment:
	identifier=Access kind=AssignmentKind expression=Expression;

@Override
Primary returns Expression:
  Variable |
  OPEN Expression CLOSE;