<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Design decisions | Project M</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="A data-driven programming language for game developers">
    <link rel="preload" href="/assets/css/0.styles.e7776260.css" as="style"><link rel="preload" href="/assets/js/app.4bbd4575.js" as="script"><link rel="preload" href="/assets/js/2.00ca0170.js" as="script"><link rel="preload" href="/assets/js/28.bf1b4c72.js" as="script"><link rel="prefetch" href="/assets/js/10.c07c8ddb.js"><link rel="prefetch" href="/assets/js/11.5c249d44.js"><link rel="prefetch" href="/assets/js/12.45094f6c.js"><link rel="prefetch" href="/assets/js/13.966a2bf7.js"><link rel="prefetch" href="/assets/js/14.51e9f4e5.js"><link rel="prefetch" href="/assets/js/15.b4c8bfaf.js"><link rel="prefetch" href="/assets/js/16.4e99043f.js"><link rel="prefetch" href="/assets/js/17.6272662d.js"><link rel="prefetch" href="/assets/js/18.487de688.js"><link rel="prefetch" href="/assets/js/19.e66ff5fb.js"><link rel="prefetch" href="/assets/js/20.59e03c9c.js"><link rel="prefetch" href="/assets/js/21.f54ea862.js"><link rel="prefetch" href="/assets/js/22.dc037833.js"><link rel="prefetch" href="/assets/js/23.32b2e87f.js"><link rel="prefetch" href="/assets/js/24.666a6c4d.js"><link rel="prefetch" href="/assets/js/25.36e975d9.js"><link rel="prefetch" href="/assets/js/26.736ca13b.js"><link rel="prefetch" href="/assets/js/27.e45449a8.js"><link rel="prefetch" href="/assets/js/29.592dcf7d.js"><link rel="prefetch" href="/assets/js/3.cc26f39f.js"><link rel="prefetch" href="/assets/js/30.57727fa2.js"><link rel="prefetch" href="/assets/js/31.2c85830b.js"><link rel="prefetch" href="/assets/js/32.266cc1e9.js"><link rel="prefetch" href="/assets/js/33.9f42423d.js"><link rel="prefetch" href="/assets/js/34.5eefb5ee.js"><link rel="prefetch" href="/assets/js/35.38a3c8a4.js"><link rel="prefetch" href="/assets/js/36.e46504f4.js"><link rel="prefetch" href="/assets/js/37.e71cd442.js"><link rel="prefetch" href="/assets/js/38.571118bd.js"><link rel="prefetch" href="/assets/js/4.9ef933de.js"><link rel="prefetch" href="/assets/js/5.635098ef.js"><link rel="prefetch" href="/assets/js/6.ad7a810e.js"><link rel="prefetch" href="/assets/js/7.a6eb46dc.js"><link rel="prefetch" href="/assets/js/8.00b34a07.js"><link rel="prefetch" href="/assets/js/9.d2c1d7e5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e7776260.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://avatars2.githubusercontent.com/u/6147446?s=400&amp;u=c325f5bfc187e889f05cc872681ad1cb1ba6b3b5&amp;v=4" alt="Project M" class="logo"> <span class="site-name can-hide">Project M</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/0. Starter guide/0. Set up.html" class="nav-link">
  Starter guide
</a></div><div class="nav-item"><a href="/1. User guide/0. How to/0. Transforms.html" class="nav-link">
  User guide
</a></div><div class="nav-item"><a href="/2. Developer guide/0. Philosophy/0. Motivation.html" class="nav-link">
  Developer guide
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/0. Starter guide/0. Set up.html" class="nav-link">
  Starter guide
</a></div><div class="nav-item"><a href="/1. User guide/0. How to/0. Transforms.html" class="nav-link">
  User guide
</a></div><div class="nav-item"><a href="/2. Developer guide/0. Philosophy/0. Motivation.html" class="nav-link">
  Developer guide
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/2. Developer guide/0. Philosophy/0. Motivation.html" class="sidebar-link">Language properties</a></li><li><a href="/2. Developer guide/0. Philosophy/2. Design decisions.html" class="active sidebar-link">Design decisions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2. Developer guide/0. Philosophy/2. Design decisions.html#lexer" class="sidebar-link">Lexer</a></li><li class="sidebar-sub-header"><a href="/2. Developer guide/0. Philosophy/2. Design decisions.html#syntax" class="sidebar-link">Syntax</a></li><li class="sidebar-sub-header"><a href="/2. Developer guide/0. Philosophy/2. Design decisions.html#parser" class="sidebar-link">Parser</a></li><li class="sidebar-sub-header"><a href="/2. Developer guide/0. Philosophy/2. Design decisions.html#type-system" class="sidebar-link">Type system</a></li><li class="sidebar-sub-header"><a href="/2. Developer guide/0. Philosophy/2. Design decisions.html#type-inference" class="sidebar-link">Type inference</a></li><li class="sidebar-sub-header"><a href="/2. Developer guide/0. Philosophy/2. Design decisions.html#standard-library" class="sidebar-link">Standard library</a></li><li class="sidebar-sub-header"><a href="/2. Developer guide/0. Philosophy/2. Design decisions.html#validation-algorithm" class="sidebar-link">Validation algorithm</a></li><li class="sidebar-sub-header"><a href="/2. Developer guide/0. Philosophy/2. Design decisions.html#the-ide-project" class="sidebar-link">The IDE project</a></li><li class="sidebar-sub-header"><a href="/2. Developer guide/0. Philosophy/2. Design decisions.html#the-syntax" class="sidebar-link">The syntax</a></li><li class="sidebar-sub-header"><a href="/2. Developer guide/0. Philosophy/2. Design decisions.html#debug-and-production-modes-in-the-generator" class="sidebar-link">Debug and production modes in the generator</a></li><li class="sidebar-sub-header"><a href="/2. Developer guide/0. Philosophy/2. Design decisions.html#parser-and-syntax" class="sidebar-link">Parser and syntax</a></li><li class="sidebar-sub-header"><a href="/2. Developer guide/0. Philosophy/2. Design decisions.html#licensing" class="sidebar-link">Licensing</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="design-decisions"><a href="#design-decisions" class="header-anchor">#</a> Design decisions</h1> <h2 id="lexer"><a href="#lexer" class="header-anchor">#</a> Lexer</h2> <p>The lexer is derived from the Unicode 13 standard.
It accepts all character code points in the
Base Multilangual Plane: U+0000 to U+FFFF.</p> <p>It classifies the characters in character classes
given by the unicode consortium and then merges together
in the major character groups:</p> <ul><li>Letter</li> <li>Number</li> <li>Punctuation</li> <li>Symbol</li> <li>Blank</li> <li>Control</li></ul> <p>For the case of M, three terminals are interesting:</p> <ul><li>Identifiers are a nonempty string of letters</li> <li>Operators are a nonempty string of symbols</li> <li>Blanks are a nonempty string of blanks</li> <li>All the rest are unrecognized characters</li></ul> <h2 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h2> <p>To distinguish parser rules from each other, some keywords
are necessary. In M, the keywords are taken from the punctuations
class.
This is because it is not involved in the interesting terminals and
keeps the syntax natural language agnostic.</p> <p>The syntax of M is inspired in the family of C-like
programming languages.</p> <p>The keywords in M are:</p> <ul><li>Brackets for grouping: (), [], {}</li> <li>Commas for indicating sequences: ,</li> <li>Equality for assignment: =</li> <li>Dot for cell access: .</li></ul> <h2 id="parser"><a href="#parser" class="header-anchor">#</a> Parser</h2> <p>The parser of M is inspired in maths. In particular,
minimal Turing complete languages with infix operator support
and a special expression in cells from ECS paradigms.</p> <p>A program is a list of functions.
A function has a name, a list of parameters and a list of statements.
A statement is either a block statement, an assignment or a delegation.
A block statement has a name, a expression and a list of statements.
An assignment assigns an expression to a value or a cell.
A delegation delegates work to another function and receives the output.
An expression can be a binary operator, a unary operator,
a function application, a value or a cell.</p> <h2 id="type-system"><a href="#type-system" class="header-anchor">#</a> Type system</h2> <p>System F with bounds, possible bounded type variables.</p> <p>Is a lambda calculus where the set of base types is {Bool,Number,String}
and there are no constants.
The only definable types are the base types and function types t -&gt; t'
where t and t' have been previously defined.
It is implicitly typed but fully inferred.</p> <p>The system is inspired in the theory of algebraic types.
M supports</p> <ul><li>sum types: a + b: either type a or b</li> <li>product types: a x b: a tuple of (type a, type b)</li> <li>exponent types: a -&gt; b: a function from type a to b</li> <li>polymorphic types: f&lt;a&gt;: functions on types, for example List&lt;Number&gt;.</li></ul> <p>Expressions get typed for two reasons:</p> <ul><li>Symbol typed in standard library</li> <li>Entity of a cell</li></ul> <p>Typing errors occur when either:</p> <ul><li>Not enough information to infer the type of an expression</li> <li>The inferred information is not coherent or compatible</li></ul> <h2 id="type-inference"><a href="#type-inference" class="header-anchor">#</a> Type inference</h2> <p>Hindley-Milner style fully implicitly typed inference.
Similar to Algorithm W.</p> <h2 id="standard-library"><a href="#standard-library" class="header-anchor">#</a> Standard library</h2> <p>The standard library defines the types, symbols and
errors messages that are available to all files written in M.
Symbols are
names with an associated predefined type. For example,
The symbol mass will always have the
type number. However, its name will depend on the specific
instance of standard library that is in use. In fact, two
instances of the standard library are provided, one using
English as the natural language and the other using Euskara.</p> <p>The collection of symbols is inspired in game development,
mostly in the standard components of the Unity game engine.
Commonly used properties and functions are included. In
particular, from the seven main areas of game development:</p> <ul><li>Rendering</li> <li>Audio</li> <li>Networking</li> <li>Input</li> <li>Physics</li> <li>AI</li> <li>Animation</li></ul> <p>Functions are inspired in math libraries and the matrix model
of the ECS paradigm (CRUD over the matrix):</p> <ul><li>All the data is stored in a conceptual matrix</li> <li>The rows represent entities and the columns components</li> <li>All the simulation in the game happens by modifying the matrix</li> <li>By removing and adding rows we create and destroy entities</li> <li>Columns can not be altered at runtime (no dynamic components)</li> <li>By setting or nullifying cells we add and remove components</li> <li>By querying for column sets we iterate over entities with
specific sets of components</li> <li>By looking wheter a row has a column active we determine whether
an entity has a component or not</li></ul> <p>It also provides messages to form the error messages. Five kinds
of errors can happen in M:</p> <ul><li>Syntax error: Didn't follow the grammar rules</li> <li>Symbol undefined: Used a symbol that has not been defined</li> <li>Symbol redefined: Defined a symbol that was already defined</li> <li>Undecidable type: Not enough information to infer type of an
expression</li> <li>Incompatible types: Inferred multiple types for an expression
that are not compatible between them.
For example, number and numeric or sum types are compatible.</li></ul> <h2 id="validation-algorithm"><a href="#validation-algorithm" class="header-anchor">#</a> Validation algorithm</h2> <p>Custom inference algorithm determines the types of all expressions
involved in a program written in M and reports errors if the
process goes badly.</p> <h2 id="the-ide-project"><a href="#the-ide-project" class="header-anchor">#</a> The IDE project</h2> <p>To showcase the capabilities of the language server M, a custom
IDE is built using Theia. It is a node application with a extension.
The theia blocks are defined in the root package.json and an
extension called m is included with backend and frontend contributions
for the IDE.</p> <h2 id="the-syntax"><a href="#the-syntax" class="header-anchor">#</a> The syntax</h2> <p>The goal is to maximize the familiarity of programmers.
According to the Stack Overflow 2020 interview, the top
used and loved programming languages use curly braces or
indentation to group statements in blocks.
M can support both styles independently so that programmers
can feel at home and adapt the syntax to their needs.</p> <h2 id="debug-and-production-modes-in-the-generator"><a href="#debug-and-production-modes-in-the-generator" class="header-anchor">#</a> Debug and production modes in the generator</h2> <p>By default, code is generated in &quot;debug&quot; mode. It is aimed
at providing maximal flexibility while developing the game.
When required, a production build can be made to maximize
the efficiency of the generated code, assuming properties
of the worlds of the project.</p> <h2 id="parser-and-syntax"><a href="#parser-and-syntax" class="header-anchor">#</a> Parser and syntax</h2> <p>Based on structured+procedural+modular programming.
All code blocks are enclosed by curly braces or indentation.
Programs are divided in files that each contain functions
that can call each other.
The return statement is a delegation to the return function
which can have a different name in each natural language.</p> <p>A program is divided in files.
A file is a collection of functions.
A function has a name, a list of parameters and a block of
statements.</p> <p>A statement is a controlled block of statements or
assignment or an application.</p> <p>Assignment is an statement not an operator or expression in M.</p> <p>M is a expression oriented language.</p> <h2 id="licensing"><a href="#licensing" class="header-anchor">#</a> Licensing</h2> <p>The project is licensed under AGPL v3 to enforce
that it will always remain open sourced.</p> <p>The NOTICE.md file in the root folder contains the attribution
to the open source frameworks that get bundled when the desktop
applications are built.</p> <p>It has two parts: First explains that the source code in the
repository is licensed under AGPLv3 and Martin Azpillaga Aldalur
is the copyright holder.</p> <p>Second, it lists the bundled frameworks with their author names
and a link to the open source initiave webpage of the
corresponding license as well as a link to the source code repository.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/2. Developer guide/0. Philosophy/0. Motivation.html" class="prev">
        Language properties
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4bbd4575.js" defer></script><script src="/assets/js/2.00ca0170.js" defer></script><script src="/assets/js/28.bf1b4c72.js" defer></script>
  </body>
</html>
